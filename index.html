<!DOCTYPE html>
<html lang="en">
<head></head>
<body>
    <div id="root"></div>
</body>
<script src="https://unpkg.com/react@17.0.2/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type = "text/babel">
    const root = document.getElementById("root");
    
    function MinutesToHours (){ 
        const [amout, setAmount] = React.useState(0);
        // 첫번째 element가 현재의 값 두번째 element에는 minutes를 수정해주는 modifier 함수가 들어간다
        const [inverted, setInverted] = React.useState(false);

        const onChange = (event) => {
            setAmount(event.target.value);
        };

        const reset = () => setAmount(0);

        const onInvert = () => {
            reset();
            setInverted((current) => !current)
            };

        return (
        <div>
            <div>
                <label htmlFor = "minutes">Minutes</label>
                <input  
                    value = {inverted ? amout * 60 : amout}
                    id = "minutes" 
                    placeholder = "Minutes" 
                    type = "number"
                    onChange = {onChange} //input에 변화가 생기면 onChange 함수를 실행
                    disabled = {inverted === true}
                />
            </div>

            <div>
                <label htmlFor = "hours">hours</label>
                <input 
                    value = {inverted ? amout : Math.round(amout / 60)} 
                    id = "hours"
                    placeholder = "Hours"  
                    type = "number" 
                    disabled = {inverted === false}
                    onChange = {onChange}
                /> 
            </div>

            <button onClick = {reset} >Reset</button>
            <button onClick = {onInvert} >{inverted ? "Turn back" : "Invert"}</button>
        </div>
        );

    }
    
    function KmToMiles(){
        const [amount, setAmount] = React.useState(0);

        const reset = () => setAmount(0);

        const onChange = (event) =>{
            setAmount(event.target.value);
        };

        const [invert, setInvert] = React.useState(false);

        const onInvert = () => {
            reset();
            setInvert((current) => !current)
            };

        return (
            <div>
                <h3> KM 2 M </h3>
                <div>
                    <label htmlFor="km">km</label>
                    <input 
                        type="number" 
                        id = "km"
                        placeholder = "km"
                        value = {invert ?  amount * 1.609 : amount}
                        onChange = {onChange}
                        disabled = {invert}
                        />
                </div>

                <div>
                    <label htmlFor="miles">miles</label>
                    <input 
                        type="number" 
                        id = "miles"
                        placeholder = "miles"
                        value = {!invert ? amount * 0.621 : amount}
                        onChange = {onChange}
                        disabled = {!invert}
                        />
                </div>

                <button onClick = {reset} >Reset</button>
                <button onClick = {onInvert}> {!invert ? "invert" : "back"} </button>
    

                
                

                
            </div>
            );
    }

    function App (){ 
        const [index , setIndex] = React.useState("0");

        const onSelect = (event) => {
            setIndex(event.target.value);
            
        };

        return (
        <div>
            <h1>  Super Converter </h1>
            <select value = {index} onChange ={onSelect}>
                <option value = "0"> Minutes & Hours </option>
                <option value = "1"> Km & Miles </option>
            </select>
            <hr />

            {index === "0" ? <MinutesToHours /> : null}
            {index === "1" ? <KmToMiles /> : null}
        </div>
        );

    }

    ReactDOM.render(<App />, root);
</script>
</html>
